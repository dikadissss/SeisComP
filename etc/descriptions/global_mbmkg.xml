<?xml version="1.0" encoding="UTF-8"?>
<seiscomp>
	<plugin name="Mbmkg">
		<extends>global</extends>
		<description>
		Custom magnitude for local events measured on horizontal components
		</description>
		<configuration>
			<extend-struct type="GlobalMagnitudeProfile" match-name="Mbmkg">
				<extend-struct type="GlobalMagnitudeRegionProfile">
					<parameter name="distMode" type="string">
						<description>
						Considered distance measure between source and receiver.
						Possible values are

						hypocentral: hypocentral distance

						epicentral: epicentral distance
						</description>
					</parameter>
					<parameter name="calibrationType" type="string" unit="">
						<description>
						Type of magnitude calibration formula to be considered.
						The calibration parameters are considered accordingly.
						Currently supported are

						&quot;parametric&quot;: consider parameters of parametric
						configuration in parametric section
						</description>
					</parameter>

					<group name="parametric">
						<description>
						Parameters for parametric magnitude calibration:
						Mbmkg = (log10(A) + a1 * log10(r) + a2 * (r) + a3) / b
						</description>
						<parameter name="a1" type="double">
							<description>
							Overrides the calibration parameter a1
							for computing Mbmkg per region. See a1
							description in the bindings.
							</description>
						</parameter>
						<parameter name="a2" type="double">
							<description>
							Overrides the calibration parameter a2
							for computing Mbmkg per region. See a2
							description in the bindings.
							</description>
						</parameter>
						<parameter name="a3" type="double">
							<description>
							Overrides the calibration parameter a3
							for computing Mbmkg per region. See a3
							description in the bindings.
							</description>
						</parameter>
						<parameter name="b" type="double">
							<description>
							Overrides the calibration parameter b
							for computing Mbmkg per region. See b
							description in the bindings.
							</description>
						</parameter>
					</group>
				</extend-struct>
			</extend-struct>
		</configuration>
	</plugin>
	<binding name="Mbmkg" module="global">
		<description>
		Custom magnitude for local events measured on horizontal components
		</description>
		<configuration>
			<group name="amplitudes">
				<group name="Mbmkg">
					<description>
					Parameters for measuring Mbmkg amplitudes. Add more parameters
					by adding an amplitude type profile 'Mbmkg',
					</description>
					<parameter name="preFilter" type="string" default="BW(3,0.5,12)">
						<description>
						The filter applied to raw records before applying
						Wood-Anderson simulation.
						</description>
					</parameter>
					<parameter name="applyWoodAnderson" type="boolean" default="true">
						<description>
						Applying Wood-Anderson simulation. To achieve displacement
						records without WA simulation, an integration filter can
						be applied with the pre-filter.
						</description>
					</parameter>
					<parameter name="amplitudeScale" type="string" default="1.0">
						<description>
						Scaling value multiplied to the measured amplitudes to
						match the amplitude units expected by the magnitude
						calibration function.

						Expected amplitudes are
						in units of mym but actual amplitudes provided from
						Wood-Anderson-corrected seismograms are in units of mm:
						amplitudeScale = 1000.

						If data are not corrected for WA, measured amplitudes
						take the unit of gain-corrected data considering the
						preFilter:
						amplitudeScale converts between units of measured and
						excpected amplitude.
						</description>
					</parameter>
					<parameter name="measureType" type="string" default="AbsMax">
						<description>
						Type for measuring amplitudes. Available:

						AbsMax: absolute maximum

						MinMax: half difference between absolute maximum and minimum

						PeakTrough: half difference between maximum and minimum
						on a half cycle
						</description>
					</parameter>
					<parameter name="combiner" type="string" default="max">
						<description>
						Define how to combine the amplitudes measured on both
						horizontals components:

						min: take the minimum

						max: take the maxium

						avgerage: form the average

						geometric_mean: form the geometric mean
						</description>
					</parameter>
				</group>
			</group>
			<group name="magnitudes">
				<group name="Mbmkg">
					<description>
					Parameters for computing Mbmkg magnitudes from Mbmkg amplitudes.
					</description>
					<parameter name="distMode" type="string" default="hypocentral">
						<description>
						Considered distance measure between source and receiver.
						Possible values are

						hypocentral: hypocentral distance

						epicentral: epicentral distance
						</description>
					</parameter>
					<parameter name="minDist" type="double" default="-1.0" unit="deg">
						<description>
						The minimum distance for computing magnitudes from amplitudes.
						Negative values deactivate the check.
						</description>
					</parameter>
					<parameter name="maxDist" type="double" default="8" unit="deg">
						<description>
						The maximum distance for computing magnitudes from amplitudes.
						Negative values deactivate the check.
						</description>
					</parameter>
					<parameter name="maxDepth" type="double" default="80" unit="km">
						<description>
						The maximum source depth up to which magnitudes are computed.
						</description>
					</parameter>
					<parameter name="calibrationType" type="string" default="&quot;parametric&quot;" unit="">
						<description>
						Type of magnitude calibration formula to be considered.
						The calibration parameters are considered accordingly.
						Currently supported are

						&quot;parametric&quot;: consider parameters of parametric
						configuration in parametric section
						</description>
					</parameter>
					<group name="parametric">
						<description>
						Parameters for parametric magnitude calibration:
						Mbmkg = (log10(A) + a1 * log10(r) + a2 * (r) + a3) / b

						Considered if magnitude.Mbmkg.calibrationType = "parametric".
						</description>
						<parameter name="a1" type="double" default="0.69">
							<description>
							The calibration value 'a1' applied in the
							parametric magnitude calibration formula.
							</description>
						</parameter>
						<parameter name="a2" type="double"  default="0.00095">
							<description>
							The calibration value 'a2' applied in the
							magnitude calibration formula
							parametric magnitude calibration formula.
							</description>
						</parameter>
						<parameter name="a3" type="double" default="1.11">
							<description>
							The calibration value 'a3' applied in the
							parametric magnitude calibration formula.
							</description>
						</parameter>
						<parameter name="b" type="double" default="0.0">
							<description>
							The calibration value 'b' applied in the
							parametric magnitude calibration formula.
							</description>
						</parameter>
					</group>
				</group>
			</group>
		</configuration>
	</binding>
</seiscomp>
